<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thuto's Daily Betting Tips - Betway Botswana</title>

  <!-- Favicon -->
  <link rel="icon" href="https://betway.co.bw/favicon.ico" type="image/x-icon">

  <!-- Google Fonts (Inter) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.1/dist/tailwind.min.css" rel="stylesheet">

  <!-- React + ReactDOM -->
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js" crossorigin defer></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js" crossorigin defer></script>

  <!-- Babel for JSX (Note: Precompile for production to avoid runtime warning) -->
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.9/babel.min.js" crossorigin defer></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>

  <!-- TensorFlow.js for Neural Network -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>

  <!-- ONNX.js for Transformer Model -->
  <script src="https://cdn.jsdelivr.net/npm/onnxjs@0.1.11/dist/onnx.min.js" defer></script>

  <!-- Web Worker for AI Agents -->
  <script src="https://cdn.jsdelivr.net/npm/comlink@4.4.1/dist/umd/comlink.min.js" defer></script>
</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen font-inter">
  <div id="root"></div>

  <!-- Fallback for rendering errors -->
  <div id="fallback" class="hidden text-center p-6 text-red-500 dark:text-red-400"></div>

  <script type="text/babel" defer>
    // IMPORTANT: Run this file using a local server to avoid CORS issues.
    // Example: `python -m http.server 8000` and open http://localhost:8000
    console.log('Script starting...');

    // Check if critical libraries are loaded
    if (!window.React || !window.ReactDOM || !window.Babel) {
      console.error('Critical libraries (React, ReactDOM, or Babel) failed to load.');
      document.getElementById('fallback').classList.remove('hidden');
      document.getElementById('fallback').innerHTML = 'Error: Failed to load critical libraries. Please check your network and try again.';
    }

    // Config
    const config = {
      threshold: 0.65,
      leagues: ["Premier League", "Champions League", "LaLiga", "Bundesliga", "Serie A", "Ligue 1"],
      neural_network: {
        hidden_layers: [128, 64, 32],
        epochs: 30,
        batch_size: 16
      },
      transformer_model: {
        url: 'https://example.com/transformer-model.onnx',
        input_size: 8
      }
    };

    // API Key and constants
    const API_KEY = 'YOUR_API_KEY_HERE'; // Replace with valid key from https://the-odds-api.com
    const TARGET_ODDS = 1.20;
    const BOTSWANA_TZ_OFFSET = 2 * 3600000; // CAT (UTC+2)
    const BETWAY_BW_BASE = 'https://betway.co.bw/en/sports/football';
    const MARKETS = ['h2h', 'totals', 'spreads', 'handicap'];

    // Sample soccer data
    const sampleSoccerData = [
      { date: "2025-08-10", home_team: "Arsenal", away_team: "Everton", home_goals: 2, away_goals: 0, home_points: 3, away_points: 0, league: "Premier League" },
      { date: "2025-08-17", home_team: "Liverpool", away_team: "Manchester United", home_goals: 1, away_goals: 1, home_points: 1, away_points: 1, league: "Premier League" },
      { date: "2025-08-24", home_team: "Chelsea", away_team: "Tottenham", home_goals: 3, away_goals: 2, home_points: 3, away_points: 0, league: "Premier League" },
      { date: "2025-09-07", home_team: "Everton", away_team: "Liverpool", home_goals: 0, away_goals: 4, home_points: 0, away_points: 3, league: "Premier League" },
      { date: "2025-09-14", home_team: "Real Madrid", away_team: "Barcelona", home_goals: 2, away_goals: 1, home_points: 3, away_points: 0, league: "LaLiga" },
      { date: "2025-09-21", home_team: "Inter Milan", away_team: "Juventus", home_goals: 1, away_goals: 0, home_points: 3, away_points: 0, league: "Serie A" },
      { date: "2025-09-28", home_team: "PSG", away_team: "Monaco", home_goals: 3, away_goals: 1, home_points: 3, away_points: 0, league: "Ligue 1" },
      { date: "2025-09-30", home_team: "Kairat Almaty", away_team: "Real Madrid", home_goals: 0, away_goals: 3, home_points: 0, away_points: 3, league: "Champions League" },
      { date: "2025-09-30", home_team: "Chelsea", away_team: "Benfica", home_goals: 2, away_goals: 0, home_points: 3, away_points: 0, league: "Champions League" }
    ];

    // Mock standings
    const mockStandings = {
      "Premier League": [
        { team: "Liverpool", played: 6, won: 5, drawn: 1, lost: 0, gf: 15, ga: 4, gd: 11, pts: 16, form: "W-W-D-W-W-W", xG: 12.5, xGA: 3.5, homeWinRate: 100, awayWinRate: 80 },
        { team: "Arsenal", played: 6, won: 4, drawn: 2, lost: 0, gf: 13, ga: 3, gd: 10, pts: 14, form: "W-D-W-W-D-W", xG: 11.0, xGA: 2.8, homeWinRate: 80, awayWinRate: 75 },
        { team: "Chelsea", played: 6, won: 3, drawn: 2, lost: 1, gf: 10, ga: 6, gd: 4, pts: 11, form: "W-D-L-W-D-W", xG: 9.0, xGA: 5.5, homeWinRate: 60, awayWinRate: 55 }
      ],
      "Champions League": [
        { team: "Real Madrid", played: 1, won: 1, drawn: 0, lost: 0, gf: 3, ga: 0, gd: 3, pts: 3, form: "W", xG: 2.5, xGA: 0.5, homeWinRate: 100, awayWinRate: 100 },
        { team: "Chelsea", played: 1, won: 1, drawn: 0, lost: 0, gf: 2, ga: 0, gd: 2, pts: 3, form: "W", xG: 2.0, xGA: 0.3, homeWinRate: 100, awayWinRate: 100 },
        { team: "Benfica", played: 1, won: 0, drawn: 1, lost: 0, gf: 1, ga: 1, gd: 0, pts: 1, form: "D", xG: 1.0, xGA: 1.2, homeWinRate: 50, awayWinRate: 50 }
      ]
    };

    // Mock suggestions
    const mockSuggestions = [
      {
        id: 1,
        match: "Kairat Almaty vs Real Madrid",
        league: "Champions League",
        date: "2025-09-30",
        time: "14:45 CAT",
        market: "Handicap (-2)",
        odds: 1.15,
        confidence: "Very High",
        reasoning: "Real Madrid dominant favorites (xG 2.5). Kairat underdogs. UCL MD2.",
        form: { home: "L", away: "W", xG: 0.5, xGA: 2.5 },
        headToHead: "First meeting",
        injuries: { home: "Several", away: "Squad rotation" },
        betwayLink: `${BETWAY_BW_BASE}/uefa-champions-league`,
        winProb: "87%",
        score: 0.87,
        countdown: null
      },
      {
        id: 2,
        match: "Chelsea vs Benfica",
        league: "Champions League",
        date: "2025-09-30",
        time: "17:00 CAT",
        market: "Handicap (-1)",
        odds: 1.18,
        confidence: "High",
        reasoning: "Chelsea home strong (xG 2.0). Benfica drew. UCL MD2.",
        form: { home: "W", away: "D", xG: 2.0, xGA: 0.3 },
        headToHead: "Chelsea won 3/4",
        injuries: { home: "Squad depth", away: "Defender out" },
        betwayLink: `${BETWAY_BW_BASE}/uefa-champions-league`,
        winProb: "85%",
        score: 0.85,
        countdown: null
      }
    ];

    // Data Preprocessor
    function preprocessSoccerData(data) {
      data.sort((a, b) => new Date(a.date) - new Date(b.date));
      const teamHomeForm = {};
      const teamAwayForm = {};
      const h2h = {};
      data.forEach(match => {
        if (!teamHomeForm[match.home_team]) teamHomeForm[match.home_team] = [];
        if (!teamAwayForm[match.away_team]) teamAwayForm[match.away_team] = [];
        teamHomeForm[match.home_team].push(match.home_points);
        teamAwayForm[match.away_team].push(match.away_points);
        if (teamHomeForm[match.home_team].length > 5) teamHomeForm[match.home_team].shift();
        if (teamAwayForm[match.away_team].length > 5) teamAwayForm[match.away_team].shift();
        match.home_form = teamHomeForm[match.home_team].reduce((a, b) => a + b, 0) / teamHomeForm[match.home_team].length || 0;
        match.away_form = teamAwayForm[match.away_team].reduce((a, b) => a + b, 0) / teamAwayForm[match.away_team].length || 0;

        const key = [match.home_team, match.away_team].sort().join('-');
        if (!h2h[key]) h2h[key] = { home_goals: [], away_goals: [] };
        h2h[key].home_goals.push(match.home_goals);
        h2h[key].away_goals.push(match.away_goals);
        match.h2h_home_goals = h2h[key].home_goals.reduce((a, b) => a + b, 0) / h2h[key].home_goals.length || 0;
        match.h2h_away_goals = h2h[key].away_goals.reduce((a, b) => a + b, 0) / h2h[key].away_goals.length || 0;

        match.sentiment_score = Math.random() * 0.2 - 0.1;
        match.xG_diff = (match.home_goals - match.away_goals) / 2;
      });

      const features = data.map(match => [
        match.home_form, match.away_form, match.h2h_home_goals, match.h2h_away_goals,
        match.sentiment_score, match.xG_diff, Math.random() * 0.5, Math.random() * 0.5
      ]);
      const labels = data.map(match => match.home_goals > match.away_goals ? 1 : 0);
      return { features, labels, processedData: data };
    }

    // AI Agents
    const DataAgent = {
      async fetchData(selectedDate) {
        const cacheKey = `odds_${selectedDate}`;
        const cached = await getCachedData(cacheKey);
        if (cached) {
          console.log('Using cached data for:', selectedDate);
          return cached;
        }
        return mockSuggestions.filter(s => s.date === selectedDate).map(s => ({
          ...s,
          time: adjustToCAT(s.date, s.time)
        }));
      }
    };

    const PredictionAgent = {
      nnModel: null,
      transformerSession: null,
      async init() {
        try {
          const { features, labels } = preprocessSoccerData(sampleSoccerData);
          this.nnModel = await trainNeuralNetwork(features, labels);
          console.log('Neural network initialized');
          try {
            this.transformerSession = await onnx.InferenceSession.create(config.transformer_model.url);
            console.log('Transformer model loaded');
          } catch (e) {
            console.warn('Failed to load transformer model:', e.message);
            this.transformerSession = null;
          }
        } catch (e) {
          console.error('PredictionAgent initialization error:', e);
          this.nnModel = null;
        }
      },
      async predict(features) {
        if (!this.nnModel) {
          console.warn('Neural network model not available, using fallback prediction');
          return { prob: 0.5, recommendation: 'Model not ready, using default prediction' };
        }
        try {
          const nnPred = await this.nnModel.predict(tf.tensor2d([features])).dataSync()[0];
          let combinedProb = nnPred;
          if (this.transformerSession) {
            const transformerInput = new onnx.Tensor(Float32Array.from(features), 'float32', [1, config.transformer_model.input_size]);
            const transformerPred = await this.transformerSession.run({ input: transformerInput });
            combinedProb = (nnPred * 0.4 + transformerPred.output.data[0] * 0.6);
          }
          return {
            prob: combinedProb,
            recommendation: combinedProb > config.threshold ? 'Bet on home team' : 'No strong bet'
          };
        } catch (e) {
          console.error('Prediction error:', e);
          return { prob: 0.5, recommendation: 'Prediction failed, check console' };
        }
      }
    };

    const RecommendationAgent = {
      async generate(suggestions, standings, userPrefs) {
        const scored = await Promise.all(suggestions.map(async s => ({
          ...s,
          score: await calculateBetScore(s, standings, userPrefs)
        })));
        return scored.filter(s => s.score > config.threshold).sort((a, b) => b.score - a.score);
      }
    };

    const ValidationAgent = {
      async validate(suggestions, liveOdds) {
        return suggestions.filter(s => {
          const oddsDiff = Math.abs(s.odds - (liveOdds[s.match]?.odds || s.odds));
          return oddsDiff < 0.1 && s.score > config.threshold;
        });
      }
    };

    // Neural Network Training
    async function trainNeuralNetwork(features, labels) {
      try {
        const model = tf.sequential();
        model.add(tf.layers.dense({ units: config.neural_network.hidden_layers[0], inputShape: [8], activation: 'relu' }));
        model.add(tf.layers.dense({ units: config.neural_network.hidden_layers[1], activation: 'relu' }));
        model.add(tf.layers.dense({ units: config.neural_network.hidden_layers[2], activation: 'relu' }));
        model.add(tf.layers.dense({ units: 1, activation: 'sigmoid' }));
        model.compile({ loss: 'binaryCrossentropy', optimizer: 'adam', metrics: ['accuracy'] });

        const xs = tf.tensor2d(features);
        const ys = tf.tensor2d(labels, [labels.length, 1]);
        await model.fit(xs, ys, { epochs: config.neural_network.epochs, batchSize: config.neural_network.batch_size, verbose: 0 });
        xs.dispose();
        ys.dispose();
        return model;
      } catch (e) {
        console.error('NN Training Error:', e);
        return null;
      }
    }

    // Cache with IndexedDB
    async function getCachedData(key) {
      return new Promise(resolve => {
        const request = indexedDB.open('ThutoDB', 1);
        request.onupgradeneeded = e => {
          e.target.result.createObjectStore('cache');
        };
        request.onsuccess = e => {
          const db = e.target.result;
          const tx = db.transaction('cache', 'readonly').objectStore('cache').get(key);
          tx.onsuccess = () => resolve(tx.result || null);
        };
      });
    }

    async function setCachedData(key, data) {
      return new Promise(resolve => {
        const request = indexedDB.open('ThutoDB', 1);
        request.onupgradeneeded = e => {
          e.target.result.createObjectStore('cache');
        };
        request.onsuccess = e => {
          const db = e.target.result;
          db.transaction('cache', 'readwrite').objectStore('cache').put(data, key);
          resolve();
        };
      });
    }

    // Calculate bet score
    async function calculateBetScore(suggestion, standings, userPrefs = { risk: 'medium' }) {
      try {
        const [homeTeam, awayTeam] = suggestion.match.split(' vs ');
        const prediction = await PredictionAgent.predict([
          standings[suggestion.league]?.find(t => t.team === homeTeam)?.homeWinRate / 100 || 0.5,
          standings[suggestion.league]?.find(t => t.team === awayTeam)?.awayWinRate / 100 || 0.5,
          1.0, 1.0, Math.random() * 0.2 - 0.1, 0.5, 0.5, 0.5
        ]);
        const riskFactor = userPrefs.risk === 'low' ? 0.8 : userPrefs.risk === 'high' ? 1.2 : 1.0;
        const ruleScore = (suggestion.form.xG > 1.5 ? 0.3 : 0) + (suggestion.headToHead.includes('won') ? 0.2 : 0.1) + (suggestion.odds < 1.10 ? 0.1 : 0.05);
        return (prediction.prob * 0.7 * riskFactor + ruleScore * 0.3).toFixed(2);
      } catch (e) {
        console.error('Bet Score Error:', e);
        return 0.7;
      }
    }

    // Generate slips
    async function generateSlips(suggestions, standings, userPrefs, numSlips = 50) {
      try {
        const scoredSuggestions = await RecommendationAgent.generate(suggestions, standings, userPrefs);
        const validated = await ValidationAgent.validate(scoredSuggestions, {});
        const filtered = validated
          .filter(s => (s.market.includes('1X') || s.market.includes('Handicap') || (s.market.includes('Over') && s.form.xG > 1.5)) && s.score > config.threshold)
          .sort((a, b) => b.score - a.score);
        const slips = [];
        for (let i = 0; i < numSlips; i++) {
          const numLegs = Math.floor(Math.random() * 3) + 2;
          const legs = filtered.slice(0, numLegs);
          const totalOdds = legs.reduce((acc, leg) => acc * leg.odds, 1).toFixed(2);
          const totalProb = (legs.reduce((acc, leg) => acc * parseFloat(leg.winProb.replace('%', '')) / 100, 1) * 100).toFixed(0) + "%";
          if (parseFloat(totalOdds) <= 1.20 && parseFloat(totalProb) >= 85) {
            slips.push({
              id: i + 1,
              legs,
              totalOdds,
              winProb: totalProb,
              reasoning: `AI-enhanced ${numLegs}-leg multi (score >${config.threshold}): ~${totalProb} win chance.`
            });
          }
        }
        return slips.length ? slips : [{
          id: 1,
          legs: filtered.slice(0, 2),
          totalOdds: "1.20",
          winProb: "85%",
          reasoning: "Fallback: AI-enhanced high-probability bets."
        }];
      } catch (e) {
        console.error('Slip Generation Error:', e);
        return [{
          id: 1,
          legs: mockSuggestions.slice(0, 2),
          totalOdds: "1.20",
          winProb: "85%",
          reasoning: "Error fallback: High-probability bets."
        }];
      }
    }

    // Fetch real suggestions
    async function fetchRealSuggestions(selectedDate) {
      const cacheKey = `odds_${selectedDate}`;
      const cached = await getCachedData(cacheKey);
      if (cached) {
        console.log('Using cached data for:', selectedDate);
        return cached;
      }
      if (!API_KEY || API_KEY === 'YOUR_API_KEY_HERE') {
        console.warn('No API key. Using mock data.');
        return mockSuggestions.filter(s => s.date === selectedDate).map(s => ({
          ...s,
          time: adjustToCAT(s.date, s.time)
        }));
      }
      try {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 5000);
        const sports = [
          'soccer_uefa_champions_league', 'soccer_uefa_europa_league', 'soccer_epl', 'soccer_la_liga',
          'soccer_bundesliga', 'soccer_serie_a', 'soccer_ligue_one'
        ];
        const suggestions = [];
        for (const sport of sports) {
          const url = `https://api.the-odds-api.com/v4/sports/${sport}/odds/?apiKey=${API_KEY}&regions=uk&markets=${MARKETS.join(',')}&oddsFormat=decimal&date=${selectedDate}`;
          const response = await fetch(url, { signal: controller.signal });
          clearTimeout(timeoutId);
          if (!response.ok) continue;
          const data = await response.json();
          data.forEach(event => {
            if (new Date(event.commence_time).toDateString() === new Date(selectedDate).toDateString()) {
              const bestMarket = event.bookmakers?.find(b => b.key === 'betway')?.markets?.find(m => MARKETS.includes(m.key));
              if (bestMarket) {
                const outcome = bestMarket.outcomes?.find(o => o.price <= TARGET_ODDS + 0.05);
                if (outcome) {
                  const catTime = new Date(new Date(event.commence_time).getTime() + BOTSWANA_TZ_OFFSET);
                  suggestions.push({
                    id: event.id,
                    match: `${event.home_team} vs ${event.away_team}`,
                    league: event.sport_nice || 'Unknown',
                    date: catTime.toISOString().split('T')[0],
                    time: catTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) + " CAT",
                    market: `${bestMarket.key} (${outcome.name})`,
                    odds: outcome.price.toFixed(2),
                    confidence: outcome.price < 1.10 ? 'Very High' : 'High',
                    reasoning: `Live Betway BW odds via The Odds API. AI-enhanced.`,
                    form: { home: "N/A", away: "N/A", xG: "N/A", xGA: "N/A" },
                    headToHead: "N/A",
                    injuries: { home: "N/A", away: "N/A" },
                    betwayLink: `${BETWAY_BW_BASE}/${sport.replace('soccer_', '')}`,
                    winProb: (1 / outcome.price * 100).toFixed(0) + "%",
                    score: 0.7,
                    countdown: null
                  });
                }
              }
            }
          });
        }
        await setCachedData(cacheKey, suggestions);
        console.log('Fetched suggestions:', suggestions);
        return suggestions.length ? suggestions : mockSuggestions.filter(s => s.date === selectedDate).map(s => ({
          ...s,
          time: adjustToCAT(s.date, s.time)
        }));
      } catch (error) {
        console.error('API Error:', error.message);
        return mockSuggestions.filter(s => s.date === selectedDate).map(s => ({
          ...s,
          time: adjustToCAT(s.date, s.time)
        }));
      }
    }

    // Time Zone Adjustment
    function adjustToCAT(dateStr, timeStr) {
      try {
        const [hours, minutes] = timeStr.replace(' CAT', '').split(':').map(Number);
        const date = new Date(`${dateStr}T${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:00Z`);
        const catTime = new Date(date.getTime() + BOTSWANA_TZ_OFFSET);
        return catTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) + " CAT";
      } catch (e) {
        console.error('Time Adjustment Error:', e);
        return timeStr;
      }
    }

    // Countdown Timer
    function startCountdown(suggestion) {
      const [hours, minutes] = suggestion.time.replace(' CAT', '').split(':').map(Number);
      const matchTime = new Date(`${suggestion.date}T${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:00`);
      const now = new Date();
      const diff = matchTime - now;
      if (diff <= 0) return "Match Started";
      const hoursLeft = Math.floor(diff / 3600000);
      const minutesLeft = Math.floor((diff % 3600000) / 60000);
      return `${hoursLeft}h ${minutesLeft}m`;
    }

    // Error Boundary
    class ErrorBoundary extends React.Component {
      state = { error: null, errorInfo: null };
      static getDerivedStateFromError(error) {
        console.error('ErrorBoundary caught error:', error);
        return { error };
      }
      componentDidCatch(error, errorInfo) {
        console.error('ErrorBoundary error details:', error, errorInfo);
        this.setState({ error, errorInfo });
      }
      render() {
        if (this.state.error) {
          return (
            <div className="p-6 text-center text-red-500 dark:text-red-400 bg-white dark:bg-gray-800 rounded-lg shadow-lg">
              <h2 className="text-xl font-bold">Something went wrong</h2>
              <p>Error: {this.state.error.message}</p>
              <p>Please check the console (F12) for details or try refreshing the page.</p>
              <button
                onClick={() => window.location.reload()}
                className="mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition"
              >
                Refresh Page
              </button>
            </div>
          );
        }
        return this.props.children;
      }
    }

    // Main App
    function App() {
      const [suggestions, setSuggestions] = React.useState([]);
      const [standings, setStandings] = React.useState(mockStandings);
      const [searchQuery, setSearchQuery] = React.useState('');
      const [slips, setSlips] = React.useState([]);
      const [loading, setLoading] = React.useState(true);
      const [darkMode, setDarkMode] = React.useState(false);
      const [selectedDate, setSelectedDate] = React.useState('2025-09-30');
      const [selectedLeague, setSelectedLeague] = React.useState('All');
      const [homeTeam, setHomeTeam] = React.useState('');
      const [awayTeam, setAwayTeam] = React.useState('');
      const [prediction, setPrediction] = React.useState(null);
      const [userPrefs, setUserPrefs] = React.useState({ risk: 'medium', favoriteTeams: [] });
      const [sortConfig, setSortConfig] = React.useState({ key: 'pts', direction: 'desc' });
      const validDates = ['2025-09-30', '2025-10-28'];

      React.useEffect(() => {
        console.log('Toggling dark mode:', darkMode);
        document.body.classList.toggle('dark', darkMode);
      }, [darkMode]);

      React.useEffect(() => {
        console.log('Loading data for date:', selectedDate);
        const loadData = async () => {
          try {
            setLoading(true);
            await PredictionAgent.init();
            const data = await DataAgent.fetchData(selectedDate);
            const updatedSuggestions = data.map(s => ({
              ...s,
              countdown: startCountdown(s)
            }));
            setSuggestions(updatedSuggestions);
            const generatedSlips = await generateSlips(updatedSuggestions, standings, userPrefs);
            setSlips(generatedSlips);
            console.log('Data loaded successfully');
          } catch (e) {
            console.error('LoadData error:', e);
            setSuggestions(mockSuggestions.filter(s => s.date === selectedDate).map(s => ({
              ...s,
              time: adjustToCAT(s.date, s.time),
              countdown: startCountdown(s)
            })));
            setSlips([{
              id: 1,
              legs: mockSuggestions.slice(0, 2),
              totalOdds: "1.20",
              winProb: "85%",
              reasoning: "Error fallback: High-probability bets."
            }]);
          } finally {
            setLoading(false);
            console.log('Loading state cleared');
          }
        };
        loadData();
      }, [selectedDate]);

      React.useEffect(() => {
        const ctx = document.getElementById('performanceChart')?.getContext('2d');
        if (ctx) {
          console.log('Initializing Chart.js');
          new Chart(ctx, {
            type: 'line',
            data: {
              labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5'],
              datasets: [{
                label: 'Slip Win Rate (%)',
                data: [85, 88, 90, 87, 92],
                backgroundColor: 'rgba(40, 167, 69, 0.2)',
                borderColor: '#28A745',
                borderWidth: 2,
                tension: 0.1
              }]
            },
            options: {
              responsive: true,
              scales: { y: { beginAtZero: true, max: 100 } },
              plugins: { legend: { display: false } }
            }
          });
        } else {
          console.warn('Chart.js canvas not found');
        }
      }, []);

      React.useEffect(() => {
        console.log('Setting up notification interval');
        const interval = setInterval(() => {
          setSuggestions(prev => prev.map(s => ({
            ...s,
            countdown: startCountdown(s)
          })));
          const highConfidence = suggestions.find(s => parseFloat(s.score) > 0.85 && s.countdown !== 'Match Started');
          if (highConfidence && Notification.permission === 'granted') {
            console.log('Sending notification for:', highConfidence.match);
            new Notification(`High Confidence Bet: ${highConfidence.match}`, {
              body: `${highConfidence.reasoning} (Score: ${highConfidence.score})`,
              icon: 'https://betway.co.bw/favicon.ico'
            });
          }
        }, 60000);
        return () => {
          console.log('Clearing notification interval');
          clearInterval(interval);
        };
      }, [suggestions]);

      const filteredSuggestions = suggestions.filter(s =>
        (selectedLeague === 'All' || s.league === selectedLeague) &&
        (s.match.toLowerCase().includes(searchQuery.toLowerCase()) ||
         s.league.toLowerCase().includes(searchQuery.toLowerCase()) ||
         s.market.toLowerCase().includes(searchQuery.toLowerCase()))
      );

      const sortStandings = (league, key) => {
        try {
          const direction = sortConfig.key === key && sortConfig.direction === 'asc' ? 'desc' : 'asc';
          setSortConfig({ key, direction });
          const sorted = [...standings[league]].sort((a, b) => {
            const aVal = a[key];
            const bVal = b[key];
            if (aVal < bVal) return direction === 'asc' ? -1 : 1;
            if (aVal > bVal) return direction === 'asc' ? 1 : -1;
            return 0;
          });
          setStandings(prev => ({ ...prev, [league]: sorted }));
        } catch (e) {
          console.error('Sort Error:', e);
        }
      };

      const handlePredict = async () => {
        if (!homeTeam || !awayTeam || !selectedLeague) {
          setPrediction({ homeWinProb: 'N/A', recommendation: 'Please fill all fields' });
          return;
        }
        const result = await PredictionAgent.predict([
          standings[selectedLeague]?.find(t => t.team === homeTeam)?.homeWinRate / 100 || 0.5,
          standings[selectedLeague]?.find(t => t.team === awayTeam)?.awayWinRate / 100 || 0.5,
          1.0, 1.0, Math.random() * 0.2 - 0.1, 0.5, 0.5, 0.5
        ]);
        setPrediction({
          homeWinProb: (result.prob * 100).toFixed(0) + '%',
          recommendation: result.recommendation
        });
      };

      const requestNotificationPermission = async () => {
        if (Notification.permission !== 'granted') {
          await Notification.requestPermission();
        }
      };

      if (loading) return (
        <div className="flex flex-col items-center justify-center min-h-screen">
          <div className="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-green-500"></div>
          <p className="mt-4 text-lg font-medium text-gray-600 dark:text-gray-300">Loading matches for {selectedDate}...</p>
        </div>
      );

      return (
        <ErrorBoundary>
          <div className="min-h-screen">
            {/* Sticky Header */}
            <header className="sticky top-0 z-50 bg-gradient-to-r from-blue-900 to-blue-800 dark:from-blue-800 dark:to-blue-700 shadow-lg">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row justify-between items-center gap-4">
                <div className="flex items-center gap-3">
                  <img src="https://betway.co.bw/favicon.ico" alt="Betway Logo" className="h-10 w-10" />
                  <div>
                    <h1 className="text-2xl sm:text-3xl font-bold text-white">Thuto's Betting Tips</h1>
                    <p className="text-sm text-gray-200">AI-Powered Bets for {selectedDate} (CAT, UTC+2)</p>
                  </div>
                </div>
                <div className="flex flex-col sm:flex-row gap-2 w-full sm:w-auto">
                  <input
                    type="date"
                    value={selectedDate}
                    min="2025-09-01"
                    max="2025-12-31"
                    onChange={e => setSelectedDate(e.target.value)}
                    className="p-2 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 transition"
                    aria-label="Select date"
                  />
                  <select
                    value={selectedLeague}
                    onChange={e => setSelectedLeague(e.target.value)}
                    className="p-2 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 transition"
                    aria-label="Select league"
                  >
                    {['All', ...config.leagues].map(league => (
                      <option key={league} value={league}>{league}</option>
                    ))}
                  </select>
                  <input
                    placeholder="Search matches, leagues, markets..."
                    className="p-2 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 transition"
                    value={searchQuery}
                    onChange={e => setSearchQuery(e.target.value)}
                    aria-label="Search matches"
                  />
                  <button
                    onClick={() => {
                      setLoading(true);
                      fetchRealSuggestions(selectedDate).then(d => {
                        const updated = d.map(s => ({
                          ...s,
                          countdown: startCountdown(s)
                        }));
                        setSuggestions(updated);
                        generateSlips(updated, standings, userPrefs).then(s => {
                          setSlips(s);
                          setLoading(false);
                        });
                      });
                    }}
                    className="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition transform hover:scale-105"
                    aria-label="Refresh live data"
                  >
                    Refresh
                  </button>
                  <button
                    onClick={() => setDarkMode(!darkMode)}
                    className="bg-gray-200 dark:bg-gray-600 px-4 py-2 rounded-lg transition transform hover:scale-105"
                    aria-label="Toggle dark mode"
                  >
                    {darkMode ? '☀️ Light' : '🌙 Dark'}
                  </button>
                  <button
                    onClick={requestNotificationPermission}
                    className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition transform hover:scale-105"
                    aria-label="Enable notifications"
                  >
                    🔔 Notify
                  </button>
                </div>
              </div>
            </header>

            {/* Hero Section */}
            <section className="bg-gradient-to-r from-green-500 to-green-600 text-white py-12 px-4 sm:px-6 lg:px-8">
              <div className="max-w-7xl mx-auto text-center">
                <h2 className="text-3xl sm:text-4xl font-bold">Win Big with AI-Powered Betting Tips</h2>
                <p className="mt-2 text-lg">Get high-probability football bets tailored for Betway Botswana</p>
                <a
                  href={BETWAY_BW_BASE}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="mt-4 inline-block bg-white text-green-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition transform hover:scale-105"
                  aria-label="Visit Betway Botswana"
                >
                  Bet Now
                </a>
              </div>
            </section>

            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
              {/* User Preferences */}
              <section className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg mb-8 animate-fade-in">
                <h2 className="text-2xl font-semibold text-gray-900 dark:text-white">Customize Your Bets</h2>
                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
                  <select
                    value={userPrefs.risk}
                    onChange={e => setUserPrefs({ ...userPrefs, risk: e.target.value })}
                    className="p-3 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 transition"
                    aria-label="Select risk level"
                  >
                    <option value="low">Low Risk</option>
                    <option value="medium">Medium Risk</option>
                    <option value="high">High Risk</option>
                  </select>
                  <input
                    placeholder="Favorite Teams (comma-separated)"
                    value={userPrefs.favoriteTeams.join(',')}
                    onChange={e => setUserPrefs({ ...userPrefs, favoriteTeams: e.target.value.split(',').map(t => t.trim()) })}
                    className="p-3 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 transition"
                    aria-label="Enter favorite teams"
                  />
                </div>
              </section>

              {/* Custom Prediction Input */}
              <section className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg mb-8 animate-fade-in">
                <h2 className="text-2xl font-semibold text-gray-900 dark:text-white">Predict Match Outcome</h2>
                <div className="grid grid-cols-1 sm:grid-cols-4 gap-4 mt-4">
                  <select
                    value={selectedLeague}
                    onChange={e => setSelectedLeague(e.target.value)}
                    className="p-3 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 transition"
                    aria-label="Select league for prediction"
                  >
                    <option value="">Select League</option>
                    {config.leagues.map(league => (
                      <option key={league} value={league}>{league}</option>
                    ))}
                  </select>
                  <input
                    placeholder="Home Team"
                    value={homeTeam}
                    onChange={e => setHomeTeam(e.target.value)}
                    className="p-3 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 transition"
                    aria-label="Enter home team"
                  />
                  <input
                    placeholder="Away Team"
                    value={awayTeam}
                    onChange={e => setAwayTeam(e.target.value)}
                    className="p-3 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-green-500 transition"
                    aria-label="Enter away team"
                  />
                  <button
                    onClick={handlePredict}
                    className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg transition transform hover:scale-105"
                    aria-label="Predict match outcome"
                  >
                    Predict
                  </button>
                </div>
                {prediction && (
                  <div className="mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <p className="text-gray-900 dark:text-white font-medium">Prediction: {prediction.recommendation}</p>
                    <p className="text-gray-900 dark:text-white">Home Win Probability: {prediction.homeWinProb}</p>
                  </div>
                )}
              </section>

              <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <main className="lg:col-span-3 space-y-8">
                  {/* Safe Single Bets */}
                  <section className="animate-fade-in">
                    <h2 className="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white">Safe Single Bets</h2>
                    <p className="text-sm text-gray-600 dark:text-gray-400 mb-4">High-probability bets powered by AI</p>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      {filteredSuggestions.length > 0 ? filteredSuggestions.map(sug => (
                        <div
                          key={sug.id}
                          className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border-l-4 border-green-500 hover:shadow-xl transition-transform transform hover:scale-[1.02] animate-fade-in"
                        >
                          <h3 className="text-xl font-bold text-gray-900 dark:text-white">{sug.match}</h3>
                          <p className="text-sm text-gray-600 dark:text-gray-400">{sug.league} • {sug.date} {sug.time} • Starts in: {sug.countdown}</p>
                          <p className="font-semibold text-gray-900 dark:text-white mt-2">
                            Market: <span className="text-yellow-500">{sug.market}</span> @ {sug.odds} • Prob: {sug.winProb} ({sug.confidence}) • Score: {sug.score}
                          </p>
                          <p className="mt-2 text-sm text-gray-600 dark:text-gray-300">{sug.reasoning}</p>
                          <details className="mt-2 text-sm">
                            <summary className="text-blue-500 dark:text-blue-400 cursor-pointer hover:underline">View Stats</summary>
                            <div className="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg mt-1">
                              <p className="text-gray-900 dark:text-white">Form: Home {sug.form.home} (xG {sug.form.xG}), Away {sug.form.away} (xGA {sug.form.xGA})</p>
                              <p className="text-gray-900 dark:text-white">H2H: {sug.headToHead}</p>
                              <p className="text-gray-900 dark:text-white">Injuries: Home {sug.injuries.home}, Away {sug.injuries.away}</p>
                            </div>
                          </details>
                          <a
                            href={sug.betwayLink}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="mt-3 inline-block bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-semibold transition transform hover:scale-105"
                            aria-label={`Bet on ${sug.match} at Betway`}
                          >
                            Bet Now
                          </a>
                        </div>
                      )) : (
                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg text-center text-gray-600 dark:text-gray-400">
                          No matches for {selectedDate}. Try another date or league.
                        </div>
                      )}
                    </div>
                  </section>

                  {/* Multi-Team Slips */}
                  <section className="animate-fade-in">
                    <h2 className="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white">Multi-Team Slips (~1.20 Odds)</h2>
                    <p className="text-sm text-gray-600 dark:text-gray-400 mb-4">AI-enhanced 2-4 leg betting combinations</p>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      {slips.slice(0, 10).map(slip => (
                        <div
                          key={slip.id}
                          className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border-l-4 border-blue-500 hover:shadow-xl transition-transform transform hover:scale-[1.02] animate-fade-in"
                        >
                          <h3 className="font-bold text-gray-900 dark:text-white">Slip #{slip.id} • Odds: {slip.totalOdds} • Win Prob: {slip.winProb}</h3>
                          <p className="text-sm text-gray-600 dark:text-gray-300">{slip.reasoning}</p>
                          <ul className="text-sm mt-2 space-y-1 text-gray-600 dark:text-gray-300">
                            {slip.legs.map((leg, i) => (
                              <li key={i}>• {leg.match} ({leg.league}): {leg.market} @ {leg.odds} ({leg.winProb}, Score: {leg.score})</li>
                            ))}
                          </ul>
                          <a
                            href={BETWAY_BW_BASE}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="mt-3 inline-block bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-semibold transition transform hover:scale-105"
                            aria-label={`Build slip ${slip.id} on Betway`}
                          >
                            Build Slip
                          </a>
                        </div>
                      ))}
                    </div>
                  </section>
                </main>

                <aside className="space-y-6">
                  {/* Performance Tracker */}
                  <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg animate-fade-in">
                    <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-4">Performance Tracker</h3>
                    <canvas id="performanceChart" height="200"></canvas>
                    <p className="text-sm mt-4 text-center text-gray-600 dark:text-gray-400">AI-enhanced win rate (Updated Sep 30, 2025)</p>
                  </div>

                  {/* League Standings (Mobile) */}
                  <details className="lg:hidden bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg animate-fade-in">
                    <summary className="font-semibold text-lg text-blue-900 dark:text-blue-300 cursor-pointer">League Standings</summary>
                    <div className="mt-4 overflow-x-auto">
                      {Object.entries(standings).map(([league, table]) => (
                        <details key={league} className="mb-4">
                          <summary className="font-semibold text-lg text-blue-900 dark:text-blue-300 cursor-pointer">{league}</summary>
                          <div className="mt-2">
                            <table className="w-full text-xs border-collapse">
                              <thead>
                                <tr className="bg-blue-900 dark:bg-blue-800 text-white">
                                  <th className="p-2 cursor-pointer text-left" onClick={() => sortStandings(league, 'team')} aria-label="Sort by team">Team</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'played')} aria-label="Sort by played">P</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'won')} aria-label="Sort by won">W</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'drawn')} aria-label="Sort by drawn">D</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'lost')} aria-label="Sort by lost">L</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'gf')} aria-label="Sort by goals for">GF</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'ga')} aria-label="Sort by goals against">GA</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'gd')} aria-label="Sort by goal difference">GD</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'pts')} aria-label="Sort by points">Pts</th>
                                  <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'homeWinRate')} aria-label="Sort by home win rate">Home %</th>
                                </tr>
                              </thead>
                              <tbody>
                                {table.map((row, i) => (
                                  <tr key={i} className="border-b border-gray-200 dark:border-gray-600">
                                    <td className="p-2 text-left font-medium text-gray-900 dark:text-white">{row.team}</td>
                                    <td className="p-2 text-gray-900 dark:text-white">{row.played}</td>
                                    <td className="p-2 text-gray-900 dark:text-white">{row.won}</td>
                                    <td className="p-2 text-gray-900 dark:text-white">{row.drawn}</td>
                                    <td className="p-2 text-gray-900 dark:text-white">{row.lost}</td>
                                    <td className="p-2 text-gray-900 dark:text-white">{row.gf}</td>
                                    <td className="p-2 text-gray-900 dark:text-white">{row.ga}</td>
                                    <td className="p-2 text-gray-900 dark:text-white">{row.gd}</td>
                                    <td className="p-2 font-bold text-yellow-500 dark:text-yellow-400">{row.pts}</td>
                                    <td className="p-2 text-gray-900 dark:text-white">{row.homeWinRate}%</td>
                                  </tr>
                                ))}
                              </tbody>
                            </table>
                          </div>
                        </details>
                      ))}
                    </div>
                  </details>

                  {/* League Standings (Desktop) */}
                  <div className="hidden lg:block bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg animate-fade-in overflow-x-auto">
                    <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-4">League Standings</h3>
                    {Object.entries(standings).map(([league, table]) => (
                      <details key={league} className="mb-4">
                        <summary className="font-semibold text-lg text-blue-900 dark:text-blue-300 cursor-pointer">{league}</summary>
                        <div className="mt-2">
                          <table className="w-full text-sm border-collapse">
                            <thead>
                              <tr className="bg-blue-900 dark:bg-blue-800 text-white">
                                <th className="p-2 cursor-pointer text-left" onClick={() => sortStandings(league, 'team')} aria-label="Sort by team">Team</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'played')} aria-label="Sort by played">P</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'won')} aria-label="Sort by won">W</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'drawn')} aria-label="Sort by drawn">D</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'lost')} aria-label="Sort by lost">L</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'gf')} aria-label="Sort by goals for">GF</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'ga')} aria-label="Sort by goals against">GA</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'gd')} aria-label="Sort by goal difference">GD</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'pts')} aria-label="Sort by points">Pts</th>
                                <th className="p-2 cursor-pointer" onClick={() => sortStandings(league, 'homeWinRate')} aria-label="Sort by home win rate">Home %</th>
                              </tr>
                            </thead>
                            <tbody>
                              {table.map((row, i) => (
                                <tr key={i} className="border-b border-gray-200 dark:border-gray-600">
                                  <td className="p-2 text-left font-medium text-gray-900 dark:text-white">{row.team}</td>
                                  <td className="p-2 text-gray-900 dark:text-white">{row.played}</td>
                                  <td className="p-2 text-gray-900 dark:text-white">{row.won}</td>
                                  <td className="p-2 text-gray-900 dark:text-white">{row.drawn}</td>
                                  <td className="p-2 text-gray-900 dark:text-white">{row.lost}</td>
                                  <td className="p-2 text-gray-900 dark:text-white">{row.gf}</td>
                                  <td className="p-2 text-gray-900 dark:text-white">{row.ga}</td>
                                  <td className="p-2 text-gray-900 dark:text-white">{row.gd}</td>
                                  <td className="p-2 font-bold text-yellow-500 dark:text-yellow-400">{row.pts}</td>
                                  <td className="p-2 text-gray-900 dark:text-white">{row.homeWinRate}%</td>
                                </tr>
                              ))}
                            </tbody>
                          </table>
                        </div>
                      </details>
                    ))}
                  </div>

                  {/* Data Sources */}
                  <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg animate-fade-in">
                    <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-4">Data Sources</h3>
                    <ul className="space-y-2 text-sm">
                      <li><a href="https://www.sofascore.com/" target="_blank" rel="noopener" className="text-blue-500 hover:underline dark:text-blue-400">Sofascore</a></li>
                      <li><a href="https://www.flashscore.com/" target="_blank" rel="noopener" className="text-blue-500 hover:underline dark:text-blue-400">Flashscore</a></li>
                      <li><a href="https://www.soccer24.com/" target="_blank" rel="noopener" className="text-blue-500 hover:underline dark:text-blue-400">Soccer24</a></li>
                    </ul>
                  </div>

                  {/* Disclaimer */}
                  <div className="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800 animate-fade-in">
                    <p className="text-sm text-yellow-800 dark:text-yellow-200">⚠️ AI-enhanced bets for Sep 30, 2025. Replace API key for live odds. Gamble responsibly 18+.</p>
                  </div>
                </aside>
              </div>

              {/* Footer */}
              <footer className="bg-blue-900 dark:bg-blue-800 text-white py-6 mt-8">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                  <p className="text-sm">Powered by Thuto's AI Betting Engine | <a href="https://betway.co.bw" target="_blank" rel="noopener" className="text-yellow-400 hover:underline">Betway Botswana</a></p>
                  <p className="text-xs mt-2">© 2025 Thuto's Betting Tips. All rights reserved.</p>
                </div>
              </footer>
            </div>
          </div>
        </ErrorBoundary>
      );
    }

    // Render App
    try {
      console.log('Checking for root element...');
      const rootElement = document.getElementById('root');
      if (!rootElement) {
        console.error('Root element not found');
        document.getElementById('fallback').classList.remove('hidden');
        document.getElementById('fallback').innerHTML = 'Error: Root element not found. Please check the HTML structure.';
        throw new Error('Root element not found');
      }
      console.log('Attempting to render app...');
      const root = ReactDOM.createRoot(rootElement);
      root.render(<App />);
      console.log('App rendered successfully');
    } catch (err) {
      console.error('Render error:', err);
      document.getElementById('fallback').classList.remove('hidden');
      document.getElementById('fallback').innerHTML = `Render Error: ${err.message}. Check console (F12) for details or try refreshing the page.`;
    }
  </script>

  <style>
    :root {
      --brand-dark-blue: #1F3A44;
      --brand-green: #28A745;
      --brand-gold-text: #FFD700;
      --muted-gray: #6B7280;
    }
    body {
      font-family: 'Inter', sans-serif;
    }
    .dark { color: #F9FAFB; }
    .bg-blue-900 { background-color: var(--brand-dark-blue); }
    .bg-green-500 { background-color: var(--brand-green); }
    .bg-green-500:hover { background-color: #218838; }
    .text-yellow-500 { color: var(--brand-gold-text); }
    .text-gray-600 { color: var(--muted-gray); }
    .dark .bg-gray-50 { background-color: #1F2937; }
    .dark .text-gray-300 { color: #D1D5DB; }
    .dark .border-gray-300 { border-color: #4B5563; }
    table th:hover { background-color: #2D4B5B; }
    .dark table th:hover { background-color: #4B5563; }
    @media (max-width: 640px) {
      table { font-size: 0.75rem; }
      table th, table td { padding: 0.5rem; }
    }
    /* Custom Animations */
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 0.5s ease-out;
    }
  </style>
</body>
</html>
