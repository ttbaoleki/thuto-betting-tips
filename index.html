<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bet with Thuto</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
        h1 { color: #333; text-align: center; }
        button { background-color: #4CAF50; color: white; padding: 15px 32px; text-align: center; font-size: 16px; margin: 4px 2px; cursor: pointer; border: none; border-radius: 4px; display: block; margin: 20px auto; }
        button:hover { background-color: #45a049; }
        button:disabled { background-color: #cccccc; cursor: not-allowed; }
        #apiKeyInput { display: block; margin: 10px auto; padding: 10px; width: 300px; border: 1px solid #ddd; border-radius: 4px; }
        #slip { margin-top: 20px; }
        .suggestion { margin-bottom: 40px; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .suggestion h3 { color: #4CAF50; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .summary { font-size: 18px; font-weight: bold; margin-top: 20px; padding: 10px; background: #e7f3ff; border-radius: 5px; }
        .disclaimer { font-size: 12px; color: #666; text-align: center; margin-top: 20px; }
        #loading { text-align: center; color: #666; font-style: italic; }
        #error { text-align: center; color: #d32f2f; font-weight: bold; margin: 10px; }
        .league { font-style: italic; color: #555; }
    </style>
</head>
<body>
    <h1>Bet with Thuto</h1>
    <p style="text-align: center;">Generate multiple high-potential soccer accumulator suggestions for Betway using <strong>real today's fixtures from all major leagues worldwide</strong>. Focuses on double chances for safer multiplication, with occasional straight wins to boost returns. Stake: 1 Pula per slip | Target: As high as possible based on today's games (may vary by schedule). Times in Botswana (CAT, UTC+2). Copy selections to Betway!</p>
    
    <div style="text-align: center;">
        <label for="apiKeyInput">API Key (Get free from <a href="https://api-sports.io/" target="_blank">api-sports.io</a>):</label><br>
        <input type="password" id="apiKeyInput" placeholder="Enter your API key here" value="">
        <br><small>Free plan: 100 requests/day. Required for real fixtures.</small>
    </div>
    
    <button id="generateBtn" onclick="generateSlips()">Generate New Multiple Profitable Suggestions</button>
    <div id="loading">Loading today's fixtures...</div>
    <div id="error"></div>
    <div id="slip"></div>
    <div class="disclaimer">Disclaimer: Betting involves risk. This is for entertainment and suggestion only. Odds are simulated based on typical Betway ranges; check Betway for real odds and availability. Always gamble responsibly.</div>

    <script>
        let todaysFixtures = [];
        let apiKey = '';

        // Botswana time: UTC+2 hours
        const BOTSWANA_OFFSET_HOURS = 2;

        async function fetchTodaysFixtures() {
            const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
            const url = `https://v3.football.api-sports.io/fixtures?date=${today}`;
            const keyInput = document.getElementById('apiKeyInput');
            apiKey = keyInput.value.trim();

            if (!apiKey) {
                showError('Please enter your API key to fetch real fixtures.');
                return [];
            }

            try {
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'x-rapidapi-key': apiKey,
                        'x-rapidapi-host': 'v3.football.api-sports.io'
                    }
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }

                const data = await response.json();
                return data.response || []; // Array of fixtures
            } catch (error) {
                console.error('Fetch error:', error);
                showError(`Failed to fetch fixtures: ${error.message}. Using fallback simulated data.`);
                return generateFallbackFixtures(); // Fallback to simulated for demo
            }
        }

        function generateFallbackFixtures() {
            // Simulated today's fixtures for demo (real app uses API)
            return [
                { league: { name: 'Premier League' }, teams: { home: { name: 'Leeds United' }, away: { name: 'West Ham United' } }, fixture: { date: '2025-10-24T19:00:00Z' } },
                { league: { name: 'Bundesliga' }, teams: { home: { name: 'Werder Bremen' }, away: { name: 'Union Berlin' } }, fixture: { date: '2025-10-24T18:30:00Z' } },
                // Add more simulated if needed; in real, API provides 20-50+
            ];
        }

        function showError(msg) {
            document.getElementById('error').innerHTML = `<p>${msg}</p>`;
            document.getElementById('loading').style.display = 'none';
        }

        function formatBotswanaTime(utcDateStr) {
            const utcDate = new Date(utcDateStr);
            const botswanaTime = new Date(utcDate.getTime() + (BOTSWANA_OFFSET_HOURS * 60 * 60 * 1000));
            return botswanaTime.toLocaleString('en-GB', { 
                weekday: 'short', 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        }

        function generateOneSlip(fixtures) {
            if (fixtures.length === 0) {
                return { slip: [], totalOdds: 1.0 };
            }

            let totalOdds = 1.0;
            let slip = [];
            let leg = 1;
            const maxLegs = Math.min(50, fixtures.length); // Use all available if fewer

            // Shuffle fixtures for randomness
            const shuffled = [...fixtures].sort(() => Math.random() - 0.5);

            while (totalOdds < 5000 && leg <= maxLegs) {
                const fixture = shuffled[leg - 1];
                const home = fixture.teams.home.name;
                const away = fixture.teams.away.name;
                const league = fixture.league.name;
                const dateStr = formatBotswanaTime(fixture.fixture.date);

                // Decide on bet type: mostly double chance (safer, ~1.2-1.5 odds), 20% straight win (higher ~2.0-4.0 for boost)
                let isStraightWin = Math.random() < 0.2;
                let sel, odd;

                if (isStraightWin) {
                    sel = ['1', 'X', '2'][Math.floor(Math.random() * 3)];
                    odd = (1.8 + Math.random() * 2.2).toFixed(2); // 1.8 to 4.0
                } else {
                    sel = ['1X', 'X2', '12'][Math.floor(Math.random() * 3)];
                    odd = (1.2 + Math.random() * 0.3).toFixed(2); // 1.2 to 1.5
                }

                slip.push({
                    leg: leg,
                    league: league,
                    home: home,
                    away: away,
                    time: dateStr,
                    selection: sel,
                    odds: parseFloat(odd)
                });

                totalOdds *= parseFloat(odd);
                leg++;
            }

            // If still under, add a high-odds booster from remaining fixtures
            if (totalOdds < 5000 && leg <= maxLegs) {
                const remaining = shuffled.slice(leg - 1);
                if (remaining.length > 0) {
                    const fixture = remaining[0];
                    const home = fixture.teams.home.name;
                    const away = fixture.teams.away.name;
                    const league = fixture.league.name;
                    const dateStr = formatBotswanaTime(fixture.fixture.date);
                    let sel = ['1', 'X', '2'][Math.floor(Math.random() * 3)];
                    let odd = (3.0 + Math.random() * 3.0).toFixed(2); // Booster 3-6
                    slip.push({
                        leg: leg,
                        league: league,
                        home: home,
                        away: away,
                        time: dateStr,
                        selection: sel,
                        odds: parseFloat(odd)
                    });
                    totalOdds *= parseFloat(odd);
                }
            }

            return { slip, totalOdds };
        }

        async function generateSlips() {
            const btn = document.getElementById('generateBtn');
            btn.disabled = true;
            btn.textContent = 'Generating...';
            document.getElementById('loading').style.display = 'block';
            document.getElementById('error').innerHTML = '';

            if (todaysFixtures.length === 0) {
                todaysFixtures = await fetchTodaysFixtures();
                document.getElementById('loading').style.display = 'none';
                if (todaysFixtures.length === 0) {
                    btn.disabled = false;
                    btn.textContent = 'Generate New Multiple Profitable Suggestions';
                    return;
                }
            }

            const numSuggestions = 3; // Generate 3 diverse suggestions
            let html = `<p><em>Today's fixtures loaded: ${todaysFixtures.length} matches from ${new Set(todaysFixtures.map(f => f.league.name)).size} leagues.</em></p>`;

            for (let i = 0; i < numSuggestions; i++) {
                // For diversity, shuffle fixtures per suggestion
                const shuffledFixtures = [...todaysFixtures].sort(() => Math.random() - 0.5);
                const { slip, totalOdds } = generateOneSlip(shuffledFixtures);

                html += `<div class="suggestion">
                    <h3>Suggestion ${i + 1}: High-Return Accumulator (from Today's Games)</h3>
                    <table><thead><tr><th>Leg</th><th>League</th><th>Match</th><th>Time (CAT)</th><th>Selection</th><th>Odds</th></tr></thead><tbody>`;
                slip.forEach(match => {
                    html += `<tr>
                        <td>${match.leg}</td>
                        <td class="league">${match.league}</td>
                        <td>${match.home} vs ${match.away}</td>
                        <td>${match.time}</td>
                        <td>${match.selection}</td>
                        <td>${match.odds}</td>
                    </tr>`;
                });
                html += '</tbody></table>';

                // Summary
                let potentialReturn = totalOdds * 1; // 1 Pula stake
                html += `<div class="summary">
                    <p>Total Legs: ${slip.length}</p>
                    <p>Total Odds: ${totalOdds.toFixed(2)}</p>
                    <p>Stake: 1 Pula</p>
                    <p>Potential Return: ${potentialReturn.toFixed(2)} Pula (Profit: ${(potentialReturn - 1).toFixed(2)} Pula)</p>
                    <p><em>Copy these selections to Betway and place as an accumulator! Verify real odds/availability.</em></p>
                </div></div>`;
            }

            document.getElementById('slip').innerHTML = html;
            document.getElementById('loading').style.display = 'none';
            btn.disabled = false;
            btn.textContent = 'Generate New Multiple Profitable Suggestions';
        }

        // Auto-fetch and generate on page load
        window.addEventListener('load', async function() {
            await generateSlips();
        });
    </script>
</body>
</html>
